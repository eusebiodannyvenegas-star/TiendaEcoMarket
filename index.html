<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>EcoMarket - Tienda Orgánica</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    
    :root{
      --brand-green:#2d6a4f;
      --accent:#95d5b2;
      --muted:#f5f5f5;
      --card-radius:16px;
    }
    body{font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: linear-gradient(180deg, #ffffff 0%, #f8fff6 100%);}
    .navbar-brand{font-weight:700; color:var(--brand-green)!important}
    .hero{background: url('file:///D:/pagina%20web%20EcoMarket/img/EcoMarket.jpg') center/cover no-repeat; min-height:320px; border-radius:14px; color:white}
    .product-card{border-radius:var(--card-radius); transition:transform .18s ease, box-shadow .18s ease}
    .product-card:hover{transform:translateY(-6px); box-shadow:0 10px 30px rgba(0,0,0,0.08)}
    .badge-organic{background:var(--accent); color:var(--brand-green); font-weight:700}
    .search-suggest{position:relative}
    .suggest-box{position:absolute; left:0; right:0; top:100%; z-index:1000; background:white; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,.08); max-height:240px; overflow:auto}
    .cart-drawer{width:340px; right:0; top:0; height:100%; background:white; box-shadow:-10px 0 30px rgba(0,0,0,.12); transform:translateX(110%); transition:transform .25s ease; z-index:1200}
    .cart-drawer.open{transform:translateX(0)}
    footer{background:#eef7f1;}
    
    @media (max-width:576px){ .hero{min-height:220px} }
  </style>
</head>
<body>


<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
  <div class="container">
    <a class="navbar-brand" href="#">EcoMarket</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navMenu">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link active" aria-current="page" href="#features">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="#productos">Productos</a></li>
        <li class="nav-item"><a class="nav-link" href="#contacto">Contacto</a></li>
      </ul>
      <form class="d-flex me-3" role="search" onsubmit="return false;">
        <div class="input-group search-suggest">
          <input id="searchInput" class="form-control" placeholder="Buscar productos, ej. manzana" aria-label="Buscar" autocomplete="off">
          <button class="btn btn-outline-secondary" type="button" id="clearSearch"><i class="fa fa-xmark"></i></button>
          <div id="suggestContainer" class="suggest-box d-none"></div>
        </div>
      </form>
      <div class="d-flex align-items-center">
        <button class="btn btn-outline-success me-2 d-none d-lg-inline" id="btn-filter">Filtros</button>
        <button class="btn btn-success position-relative" id="btn-cart">
          <i class="fa fa-cart-shopping"></i>
          <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
        </button>
      </div>
    </div>
  </div>
</nav>


<section class="container my-4">
  <div class="hero rounded p-4 d-flex align-items-center">
    <div class="me-auto">
      <h1 class="display-6 fw-bold">Productos orgánicos, directos a tu mesa</h1>
      <p class="lead">Frutas y verduras frescas, granos y legumbres de alta calidad. Compra fácil y responsable.</p>
      <div>
        <a href="#productos" class="btn btn-light btn-lg me-2">Ver productos</a>
        <a href="#contacto" class="btn btn-outline-light btn-lg">Contáctanos</a>
      </div>
    </div>
    <div class="d-none d-md-block" style="width:320px; opacity:.95">
      
    </div>
  </div>
</section>


<section class="container mb-5" id="features">
  <div class="row g-3">
    <div class="col-md-4">
      <div class="p-4 bg-white rounded shadow-sm h-100">
        <h5>Frescura diaria</h5>
        <p class="mb-0">Productos seleccionados por agricultores certificados con entrega rápida.</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-4 bg-white rounded shadow-sm h-100">
        <h5>Pago seguro</h5>
        <p class="mb-0">Múltiples métodos de pago y procesos seguros.</p>
      </div>
    </div>
    <div class="col-md-4">
      <div class="p-4 bg-white rounded shadow-sm h-100">
        <h5>Atención al cliente</h5>
        <p class="mb-0">Formulario simple y respuesta rápida a tus consultas.</p>
      </div>
    </div>
  </div>
</section>


<section class="container mb-5" id="productos">
  <div class="d-flex align-items-center mb-3">
    <h2 class="me-auto">Productos</h2>
    <div class="text-muted">Mostrar <strong id="resultCount">0</strong> resultados</div>
  </div>

  <div class="row g-3" id="productGrid">
   
  </div>
</section>


<section class="container mb-5" id="contacto">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="p-4 bg-white rounded shadow-sm">
        <h3>Contacto</h3>
        <p>¿Tienes una consulta? Completa este formulario y te responderemos en 24 horas.</p>
        <form id="contactForm" novalidate>
          <div class="row g-3">
            <div class="col-md-6">
              <label for="name" class="form-label">Nombre</label>
              <input id="name" class="form-control" required>
              <div class="invalid-feedback">Ingresa tu nombre.</div>
            </div>
            <div class="col-md-6">
              <label for="email" class="form-label">Correo</label>
              <input id="email" type="email" class="form-control" required>
              <div class="invalid-feedback">Proporciona un correo válido.</div>
            </div>
            <div class="col-12">
              <label for="subject" class="form-label">Asunto</label>
              <input id="subject" class="form-control" placeholder="Ej. Pedido, Devolución, Información" required>
              <div class="invalid-feedback">¿Sobre qué es tu consulta?</div>
            </div>
            <div class="col-12">
              <label for="message" class="form-label">Mensaje</label>
              <textarea id="message" rows="4" class="form-control" required></textarea>
              <div class="invalid-feedback">Escribe tu mensaje.</div>
            </div>
            <div class="col-12 d-flex justify-content-end">
              <button type="submit" class="btn btn-success">Enviar consulta</button>
            </div>
          </div>
        </form>
        <div id="contactAlert" class="mt-3 d-none alert alert-success">Mensaje enviado. Gracias responderemos pronto.</div>
      </div>
    </div>
  </div>
</section>


<div id="cartDrawer" class="position-fixed cart-drawer">
  <div class="p-3 border-bottom d-flex align-items-center">
    <h5 class="me-auto">Carrito</h5>
    <button class="btn btn-light" id="closeCart"><i class="fa fa-xmark"></i></button>
  </div>
  <div class="p-3" id="cartItems">
    
  </div>
  <div class="p-3 border-top">
    <div class="d-flex justify-content-between mb-2"><strong>Total</strong><strong id="cartTotal">S/0.00</strong></div>
    <button id="checkoutBtn" class="btn btn-success w-100">Proceder al pago</button>
  </div>
</div>


<div class="modal fade" id="productModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 id="modalTitle" class="modal-title">Producto</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body row">
        <div class="col-md-6">
          <img id="modalImage" src="" alt="" class="img-fluid rounded">
        </div>
        <div class="col-md-6">
          <p id="modalDesc"></p>
          <p><strong>Precio:</strong> <span id="modalPrice"></span></p>
          <p><span class="badge badge-organic">Orgánico</span> <small class="text-muted">· En stock</small></p>
          <div class="d-flex gap-2 mt-3">
            <input id="modalQty" type="number" min="1" value="1" class="form-control w-25">
            <button id="addToCartModal" class="btn btn-success">Agregar al carrito</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<footer class="py-4 mt-5">
  <div class="container d-flex justify-content-between align-items-center">
    <div>&copy; <strong>EcoMarket</strong> 2025</div>
    <div class="text-muted">Danny.V.H</div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>

const PRODUCTS = [
  // Frutas
  {id:1, name:'Manzana Roja', price:2.00, unit:'kg', category:'Frutas', image:'img/manzana_roja.jpg', desc:'Manzanas rojas orgánicas, frescas y jugosas.'},
  {id:2, name:'Plátano', price:5.00, unit:'kg', category:'Frutas', image:'img/platano.jpg', desc:'Plátanos maduros, origen local.'},
  {id:3, name:'Fresa', price:8.00, unit:'kg', category:'Frutas', image:'img/fresas.jpg', desc:'Fresas frescas y dulces, ricas en antioxidantes.'},
  {id:4, name:'Naranja', price:4.50, unit:'kg', category:'Frutas', image:'img/naranja.jpg', desc:'Naranjas jugosas con alto contenido de vitamina C.'},
  {id:5, name:'Uva', price:9.00, unit:'kg', category:'Frutas', image:'img/uva.jpeg', desc:'Uvas moradas dulces y frescas.'},
  {id:6, name:'Papaya', price:6.50, unit:'kg', category:'Frutas', image:'img/papaya.jpg', desc:'Papaya fresca, ideal para jugos y ensaladas.'},

  // Verduras
  {id:7, name:'Zanahoria', price:3.20, unit:'kg', category:'Verduras', image:'img/zanahoria.jpg', desc:'Zanahorias frescas, fuente de vitamina A.'},
  {id:8, name:'Brócoli', price:4.80, unit:'kg', category:'Verduras', image:'img/brocoli.jpg', desc:'Brócoli orgánico lleno de nutrientes.'},
  {id:9, name:'Lechuga', price:2.50, unit:'unidad', category:'Verduras', image:'img/lechuga.jpg', desc:'Lechuga fresca ideal para ensaladas.'},
  {id:10, name:'Tomate', price:3.90, unit:'kg', category:'Verduras', image:'img/tomate.jpg', desc:'Tomates rojos, frescos y jugosos.'},
  {id:11, name:'Cebolla Roja', price:2.80, unit:'kg', category:'Verduras', image:'img/cebolla roja.jpg', desc:'Cebolla roja orgánica, excelente para cocinar.'},
  {id:12, name:'Pimenton', price:5.20, unit:'kg', category:'Verduras', image:'img/pimenton.jpg', desc:'Pimientos frescos, verdes y rojos.'},

  // Menestras y granos
  {id:13, name:'Lentejas', price:5.50, unit:'kg', category:'Menestras', image:'img/lentejas.jpg', desc:'Lentejas orgánicas ricas en proteína.'},
  {id:14, name:'Frejol Canario', price:6.00, unit:'kg', category:'Menestras', image:'img/frejol canario.png', desc:'Frejol canario, suave y nutritivo.'},
  {id:15, name:'Garbanzo', price:7.50, unit:'kg', category:'Menestras', image:'img/garbanzos.jpg', desc:'Garbanzos ricos en fibra y proteínas.'},
  {id:16, name:'Arverja Verde Partida', price:4.20, unit:'kg', category:'Menestras', image:'img/arverja verde partida.jpg', desc:'Arveja partida, ideal para sopas y segundos.'},
  {id:17, name:'Quinua', price:10.50, unit:'kg', category:'Granos', image:'img/quinua.jpeg', desc:'Quinua alto en fibra y nutrientes.'},
  {id:18, name:'Arroz Integral', price:6.80, unit:'kg', category:'Granos', image:'img/arroz integral.jpg', desc:'Arroz integral orgánico, fuente de energía.'},
  {id:19, name:'Avena', price:7.00, unit:'kg', category:'Granos', image:'img/avena.jpg', desc:'Avena natural rica en fibra y vitaminas.'}
];


let cart = {};


function formatPrice(v){ return `S/${v.toFixed(2)}` }


function renderProducts(list){
  const grid = document.getElementById('productGrid');
  grid.innerHTML = '';
  list.forEach(p=>{
    const col = document.createElement('div'); col.className='col-6 col-md-3';
    col.innerHTML = `
      <div class="card product-card h-100">
        <img src="${p.image}" class="card-img-top" alt="${p.name}" style="height:160px; object-fit:cover; border-top-left-radius:var(--card-radius); border-top-right-radius:var(--card-radius);">
        <div class="card-body d-flex flex-column">
          <h6 class="card-title">${p.name}</h6>
          <p class="mb-2 text-muted small">${p.category} · ${p.unit}</p>
          <div class="mt-auto d-flex justify-content-between align-items-center">
            <div>
              <div class="fw-bold">${formatPrice(p.price)}</div>
            </div>
            <div>
              <button class="btn btn-sm btn-outline-secondary me-2" onclick="openProduct(${p.id})">Ver</button>
              <button class="btn btn-sm btn-success" onclick="addToCart(${p.id},1)"><i class="fa fa-cart-plus"></i></button>
            </div>
          </div>
        </div>
      </div>`;
    grid.appendChild(col);
  });
  document.getElementById('resultCount').textContent = list.length;
}


const searchInput = document.getElementById('searchInput');
const suggestContainer = document.getElementById('suggestContainer');
searchInput.addEventListener('input', ()=>{
  const q = searchInput.value.trim().toLowerCase();
  if(!q){ suggestContainer.classList.add('d-none'); renderProducts(PRODUCTS); return }
  const matches = PRODUCTS.filter(p => p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));
  
  suggestContainer.innerHTML = matches.map(m=>`<div class="p-2 suggestion" role="button" onclick="selectSuggestion('${m.name.replace(/'/g,'\'')}')">${m.name} <small class="text-muted">· ${m.category}</small></div>`).join('') || '<div class="p-2 text-muted">Sin resultados</div>';
  suggestContainer.classList.remove('d-none');
  renderProducts(matches);
});
function selectSuggestion(text){ searchInput.value = text; suggestContainer.classList.add('d-none'); const ev = new Event('input'); searchInput.dispatchEvent(ev); }

document.getElementById('clearSearch').addEventListener('click', ()=>{ searchInput.value=''; searchInput.dispatchEvent(new Event('input')); });


let currentProduct = null;
function openProduct(id){ const p = PRODUCTS.find(x=>x.id===id); if(!p) return; currentProduct = p; document.getElementById('modalTitle').textContent = p.name; document.getElementById('modalImage').src = p.image; document.getElementById('modalDesc').textContent = p.desc; document.getElementById('modalPrice').textContent = formatPrice(p.price); document.getElementById('modalQty').value = 1; const modal = new bootstrap.Modal(document.getElementById('productModal')); modal.show(); }


function addToCart(id, qty=1){ const p = PRODUCTS.find(x=>x.id===id); if(!p) return; cart[id] = (cart[id]||0) + Number(qty); renderCart(); }
function renderCart(){
  const container = document.getElementById('cartItems'); container.innerHTML=''; let total=0; const keys = Object.keys(cart);
  if(keys.length===0) container.innerHTML='<div class="text-center text-muted p-3">Carrito vacío</div>';
  keys.forEach(k=>{
    const p = PRODUCTS.find(x=>x.id==k); const q = cart[k]; const line = p.price*q; total += line;
    const item = document.createElement('div'); item.className='d-flex align-items-center gap-3 mb-3';
    item.innerHTML = `<img src="${p.image}" style="width:64px; height:64px; object-fit:cover; border-radius:8px">
      <div class="flex-grow-1">
        <div class="fw-semibold">${p.name}</div>
        <div class="small text-muted">${formatPrice(p.price)} · ${q} unidades</div>
      </div>
      <div class="text-end">
        <div class="fw-bold">${formatPrice(line)}</div>
        <div class="mt-1">
          <button class="btn btn-sm btn-outline-secondary" onclick="changeQty(${p.id}, -1)">-</button>
          <button class="btn btn-sm btn-outline-secondary ms-1" onclick="changeQty(${p.id}, 1)">+</button>
        </div>
      </div>`;
    container.appendChild(item);
  });
  document.getElementById('cartTotal').textContent = formatPrice(total);
  document.getElementById('cartCount').textContent = keys.reduce((s,k)=>s+cart[k],0);
}
function changeQty(id, delta){ if(!cart[id]) return; cart[id] += delta; if(cart[id]<=0) delete cart[id]; renderCart(); }


const cartDrawer = document.getElementById('cartDrawer');
document.getElementById('btn-cart').addEventListener('click', ()=>{ cartDrawer.classList.add('open'); renderCart(); });
document.getElementById('closeCart').addEventListener('click', ()=>{ cartDrawer.classList.remove('open'); });


document.getElementById('addToCartModal').addEventListener('click', ()=>{
  const qty = Number(document.getElementById('modalQty').value) || 1; if(!currentProduct) return; addToCart(currentProduct.id, qty); const modalEl = document.getElementById('productModal'); const modal = bootstrap.Modal.getInstance(modalEl); modal.hide(); cartDrawer.classList.add('open');
});


document.getElementById('checkoutBtn').addEventListener('click', ()=>{
  if(Object.keys(cart).length===0){ alert('Tu carrito está vacío.'); return }
  
  cart = {}; renderCart(); alert('Pago simulado completado. Gracias por tu compra.'); cartDrawer.classList.remove('open');
});


const contactForm = document.getElementById('contactForm');
contactForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  const name = document.getElementById('name'); const email = document.getElementById('email'); const subject = document.getElementById('subject'); const message = document.getElementById('message');
 
  let valid = true;
  [name,email,subject,message].forEach(el=>{ el.classList.remove('is-invalid'); if(!el.value.trim()){ el.classList.add('is-invalid'); valid=false } });
  if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email.value)) { email.classList.add('is-invalid'); valid=false }
  if(!valid) return;
  
  contactForm.reset(); document.getElementById('contactAlert').classList.remove('d-none'); setTimeout(()=>{ document.getElementById('contactAlert').classList.add('d-none'); }, 5000);
});


renderProducts(PRODUCTS);


document.addEventListener('click', (e)=>{ if(!document.querySelector('.search-suggest').contains(e.target)) suggestContainer.classList.add('d-none'); });

</script>
</body>
</html>
